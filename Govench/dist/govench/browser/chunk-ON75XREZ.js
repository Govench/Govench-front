import{a as ie}from"./chunk-Z4PKDJPM.js";import{a as T}from"./chunk-CRB5KXEI.js";import{A as te,D as Ce,E as he,F as xe,G as Pe,H as Oe,I as ye,L as Me,M as ne,N as Se,a as de,b as $,g as j,h as K,j as M,k as ve,n as R,p as Z,q as U,u as q,v as z,w as H,x as X,y as be,z as ee}from"./chunk-6HBBM4ZE.js";import{$ as m,Ab as _,Bb as h,Cb as A,Db as Q,Fb as J,Gb as W,Hb as Y,Jb as P,Kb as ce,Lb as me,Ma as V,Nb as ue,Ob as ge,Pa as s,Pb as E,Qa as B,V as F,a as le,cb as p,da as x,gb as c,k as pe,kb as o,lb as i,ma as v,mb as u,mc as fe,na as b,nb as C,nc as y,oc as S,pb as f,pc as _e,qc as O,rb as d,yb as I,zb as a}from"./chunk-S36E2RBU.js";function He(n,t){if(n&1&&(o(0,"td"),a(1),i()),n&2){let e=d().$implicit;s(),h(" ",e.location.address," ")}}function Ge(n,t){if(n&1&&(o(0,"td"),a(1),i()),n&2){let e=d().$implicit;s(),Q("",e.location.address,"-",e.location.departament,"-",e.location.province,"")}}function Je(n,t){n&1&&(o(0,"td")(1,"button",22),u(2,"i",23),i()())}function We(n,t){n&1&&(o(0,"td"),u(1,"button",24),i())}function Ye(n,t){if(n&1&&(o(0,"tr",10)(1,"td"),a(2),i(),p(3,He,2,1,"td",11)(4,Ge,2,3,"td",11),o(5,"td"),a(6),i(),o(7,"td",12),a(8),i(),o(9,"td"),a(10),i(),o(11,"td"),a(12),i(),p(13,Je,3,0,"td",11)(14,We,2,0,"td",11),o(15,"div",13)(16,"div",14)(17,"div",15)(18,"div",16)(19,"h1",17),a(20,"Enlace del evento"),i(),u(21,"button",18),i(),o(22,"div",19)(23,"p"),a(24),i()(),o(25,"div",20)(26,"button",21),a(27,"Cerrar"),i()()()()()()),n&2){let e=t.$implicit;s(2),_(e.tittle),s(),c("ngIf",e.location.address==="Virtual"),s(),c("ngIf",e.location.address!=="Virtual"),s(2),_(e.type),s(2),_(e.date),s(2),_(e.startTime),s(2),_(e.registrationDate),s(),c("ngIf",e.location.address==="Virtual"),s(),c("ngIf",e.location.address!=="Virtual"),s(10),h("Link :",e.link,"")}}function Qe(n,t){if(n&1){let e=C();o(0,"div",3)(1,"table",4)(2,"thead")(3,"tr")(4,"th"),a(5,"Titulo"),i(),o(6,"th",5),a(7,"Ubicacion"),i(),o(8,"th"),a(9,"Tipo"),i(),o(10,"th",5),a(11,"Fecha"),i(),o(12,"th"),a(13,"Inicio"),i(),o(14,"th"),a(15,"Fecha Inscripcion"),i()()(),o(16,"tbody"),p(17,Ye,28,10,"tr",6),i(),o(18,"tfoot")(19,"tr")(20,"td",7)(21,"button",8),f("click",function(){v(e);let l=d();return b(l.navigateMoreEvents())}),u(22,"i",9),a(23," Inscribite en m\xE1s"),i()()()()()()}if(n&2){let e=d();s(17),c("ngForOf",e.eventsIncriptions)}}function Ke(n,t){n&1&&(o(0,"strong"),a(1,"No est\xE1s inscrito a ning\xFAn evento en este momento."),i())}function Ze(n,t){if(n&1){let e=C();o(0,"div",25)(1,"p"),a(2,"\xBFSeguro que deseas eliminar la inscripcion a este evento?"),i(),o(3,"button",26),f("click",function(){v(e);let l=d();return b(l.closeModal())}),a(4," Cancelar "),i(),o(5,"button"),a(6," Eliminar "),i()()}}var we=class n{modal=!1;router=m(M);eventsIncriptions;eventService=m(ie);ngOnInit(){this.myInscriptionssEvents()}myInscriptionssEvents(){this.eventService.getMyEventsInscriptions().subscribe(t=>{this.eventsIncriptions=t.filter(e=>!e.deleted),console.log("Eventos inscritos:",this.eventsIncriptions)})}deleteEventCreate(){this.modal=!0}closeModal(){this.modal=!1}navigateToRegisterEvent(){this.router.navigate(["/organizer/eventos/registrados"])}navigateMoreEvents(){this.router.navigateByUrl("/eventos")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-events-register"]],standalone:!0,features:[P],decls:6,vars:3,consts:[["noEvents",""],["class","table-responsive",4,"ngIf","ngIfElse"],["class","modal",4,"ngIf"],[1,"table-responsive"],[1,"table"],[1,"text-center"],["class","event-row",4,"ngFor","ngForOf"],["colspan","8"],[1,"btn","ins",3,"click"],[1,"fa-solid","fa-plus"],[1,"event-row"],[4,"ngIf"],[1,"long-column","text-center"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-warning","btn-sm"],[1,"fa-solid","fa-link"],[1,"btn"],[1,"modal"],[3,"click"]],template:function(e,r){if(e&1&&(o(0,"h5"),a(1,"Registrados"),i(),p(2,Qe,24,1,"div",1)(3,Ke,2,0,"ng-template",null,0,E)(5,Ze,7,0,"div",2)),e&2){let l=I(4);s(2),c("ngIf",r.eventsIncriptions.length>0)("ngIfElse",l),s(3),c("ngIf",r.modal)}},dependencies:[O,y,S],styles:['@charset "UTF-8";.table[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0 15px}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:none;padding:10px;font-weight:700}.long-column[_ngcontent-%COMP%]{width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.event-row[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 2px 5px #03129b1a;transition:all .3s ease;border-radius:10px}.event-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px;border:none}.event-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:10px;border-bottom-left-radius:10px;border-left:2px solid #03129B}.event-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:10px;border-bottom-right-radius:10px;border-right:2px solid #03129B}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #03129b33}.btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;line-height:1.5;border-radius:.2rem}.ins[_ngcontent-%COMP%]{background-color:#03129b;color:#fff}.ins[_ngcontent-%COMP%]:hover{background-color:#020c69;border-color:#020c69}tfoot[_ngcontent-%COMP%]{background-color:#f9f9f9;border-top:2px solid #03129B;border-bottom:2px solid #03129B;padding:10px;text-align:right}.modal[_ngcontent-%COMP%]{background-color:transparent}']})};function Xe(n,t){if(n&1&&(o(0,"td"),a(1),i()),n&2){let e=d().$implicit;s(),h(" ",e.location.address," ")}}function et(n,t){if(n&1&&(o(0,"td"),a(1),i()),n&2){let e=d().$implicit;s(),Q(" ",e.location.address,"-",e.location.departament,"-",e.location.province," ")}}function tt(n,t){if(n&1&&(o(0,"tr",7)(1,"td"),a(2),i(),p(3,Xe,2,1,"td",8)(4,et,2,3,"td",8),o(5,"td"),a(6),i(),o(7,"td",9),a(8),i(),o(9,"td"),a(10),i()()),n&2){let e=t.$implicit;s(2),_(e.tittle),s(),c("ngIf",e.location.address==="Virtual"),s(),c("ngIf",e.location.address!=="Virtual"),s(2),_(e.type),s(2),_(e.date),s(2),_(e.registrationDate)}}function nt(n,t){if(n&1&&(o(0,"div",3)(1,"table",4)(2,"thead")(3,"tr")(4,"th"),a(5,"Titulo"),i(),o(6,"th"),a(7,"Ubicacion"),i(),o(8,"th"),a(9,"Tipo"),i(),o(10,"th",5),a(11,"Fecha Termino"),i(),o(12,"th"),a(13,"Fecha Inscripcion"),i()()(),o(14,"tbody"),p(15,tt,11,6,"tr",6),i()()()),n&2){let e=d();s(15),c("ngForOf",e.filterevents)}}function it(n,t){n&1&&(o(0,"strong"),a(1,"Aun no te has inscrito en ningun evento."),i())}function ot(n,t){if(n&1){let e=C();o(0,"div",10)(1,"p"),a(2,"\xBFSeguro que deseas eliminar el evento?"),i(),o(3,"button",11),f("click",function(){v(e);let l=d();return b(l.closeModal())}),a(4," Cancelar "),i(),o(5,"button"),a(6," Eliminar "),i()()}}var Ee=class n{modal=!1;eventsPast;filterevents;actualDate;eventUserService=m(ie);router=m(M);ngOnInit(){this.myEventsPast()}myEventsPast(){this.eventUserService.getMyEventsInscriptions().subscribe(t=>{this.eventsPast=t.filter(r=>!r.deleted);let e=new Date;e.setHours(0,0,0,0),this.actualDate=e.toISOString().split("T")[0],this.filterevents=this.eventsPast.filter(r=>new Date(r.date)<e),console.log(this.actualDate),console.log(this.filterevents)},t=>{console.error("Error al cargar los eventos:",t)})}deleteEventCreate(){this.modal=!0}closeModal(){this.modal=!1}navigateToLastEvent(){this.router.navigate(["/organizer/eventos/pasados"])}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-events-last"]],standalone:!0,features:[P],decls:6,vars:3,consts:[["noEvents",""],["class","table-responsive",4,"ngIf","ngIfElse"],["class","modal",4,"ngIf"],[1,"table-responsive"],[1,"table"],[1,"text-center"],["class","event-row",4,"ngFor","ngForOf"],[1,"event-row"],[4,"ngIf"],[1,"long-column","text-center"],[1,"modal"],[3,"click"]],template:function(e,r){if(e&1&&(o(0,"h5"),a(1,"Pasados"),i(),p(2,nt,16,1,"div",1)(3,it,2,0,"ng-template",null,0,E)(5,ot,7,0,"div",2)),e&2){let l=I(4);s(2),c("ngIf",r.filterevents.length>0)("ngIfElse",l),s(3),c("ngIf",r.modal)}},dependencies:[O,y,S],styles:['@charset "UTF-8";.table[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0 15px}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:none;padding:10px;font-weight:700}.long-column[_ngcontent-%COMP%]{width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.event-row[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 2px 5px #03129b1a;transition:all .3s ease;border-radius:10px}.event-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px;border:none}.event-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:10px;border-bottom-left-radius:10px;border-left:2px solid #03129B}.event-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:10px;border-bottom-right-radius:10px;border-right:2px solid #03129B}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #03129b33}.btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;line-height:1.5;border-radius:.2rem}.ins[_ngcontent-%COMP%]{background-color:#03129b;color:#fff}.ins[_ngcontent-%COMP%]:hover{background-color:#020c69;border-color:#020c69}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;flex-direction:column;color:#fff}.modal[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#0f0c3b;padding:20px;border-radius:15px;box-shadow:0 4px 8px #0003;width:300px;max-height:200px;overflow:hidden;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;color:#fff;z-index:1000}.modal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;margin-bottom:20px}.modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:5px 10px;padding:10px 20px;border-radius:10px;font-weight:700}.modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type{background-color:#e0e0e0;color:#000;border:none}.modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type{background-color:transparent;color:#fff;border:2px solid white}']})};var N=class n{baseURL=`${R.baseURL}/user/profile`;photoURL=`${R.baseURL}/user`;http=m($);constructor(){}getUserProfile(t){return this.http.get(`${this.baseURL}/${t}`)}updateUserProfile(t,e){return this.http.put(`${this.baseURL}/${t}`,e)}getProfileImage(t){return this.http.get(`${this.photoURL}/profile-photo/${t}`,{responseType:"blob"})}uploadProfileImage(t){let e=new FormData;return e.append("file",t),this.http.post(`${this.photoURL}/upload/profile-photo`,e,{responseType:"text"})}deleteProfileImage(){return this.http.delete(`${this.photoURL}/profile-photo/delete`,{responseType:"text"})}getAllUser(){return this.http.get(`${this.photoURL}/all`)}followUser(t){let e=new de().set("userId",t.toString());return this.http.post(`${this.photoURL}/follow`,null,{params:e,responseType:"text"})}unfollowUser(t){let e=new de().set("userId",t.toString());return this.http.put(`${this.photoURL}/unfollow`,null,{params:e,responseType:"text"})}static \u0275fac=function(e){return new(e||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};function rt(n,t){if(n&1&&u(0,"img",20),n&2){let e=d();c("src",e.profileImageUrl,V)}}function at(n,t){n&1&&u(0,"img",21)}function st(n,t){if(n&1&&(o(0,"li"),a(1),i()),n&2){let e=t.$implicit;s(),_(e)}}function lt(n,t){if(n&1&&(o(0,"li"),a(1),i()),n&2){let e=t.$implicit;s(),_(e)}}function ct(n,t){if(n&1&&(o(0,"li"),a(1),i()),n&2){let e=t.$implicit;s(),_(e)}}var Ie=class n{profile;profileImageUrl;userProfileService=m(N);authService=m(U);router=m(M);snackbar=m(T);sanitizer=m(j);ngOnInit(){this.loadUserProfile()}loadUserProfile(){let e=this.authService.getUser()?.id;e&&(this.userProfileService.getProfileImage(e).subscribe({next:r=>{let l=URL.createObjectURL(r);this.profileImageUrl=this.sanitizer.bypassSecurityTrustUrl(l)},error:r=>{console.error("Error al cargar la imagen de perfil:",r)}}),this.userProfileService.getUserProfile(e).subscribe({next:r=>{this.profile=r,this.showSnackBar("Perfil cargado con \xE9xito.")},error:r=>{this.showSnackBar("Error al cargar el perfil")}}))}navigateToUpdateProfile(){this.authService.getUser()?.role=="ROLE_ORGANIZER"?this.router.navigate(["/organizer/cuenta/profile/update"]):this.router.navigate(["/participant/cuenta/profile/update"])}showSnackBar(t){this.snackbar.open(t,"Close",{duration:2e3,verticalPosition:"top"})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-user-profile"]],standalone:!0,features:[P],decls:60,vars:13,consts:[["defaultImage",""],[1,"row"],[1,"col-md-1","p-0","text-center"],["alt","Profile Image","class","img-thumbnail rounded-circle",3,"src",4,"ngIf","ngIfElse"],[1,"col-md-4","p-0","text-center"],[1,"row","mt-2"],[1,"col-md-6"],[1,"col-md-4"],[1,"col-md-5","p-0"],[1,"col-md-3"],[1,"col-md-2"],[1,"btn","border-primary","rounded-pill","fw-bold",3,"click"],[1,"fa-regular","fa-pen-to-square"],[1,"row","mt-2","pt-2"],[1,"line","p-0"],[1,"p-0","border","border-dark","border-2","opacity-100"],[1,"row","ms-5"],[1,"col"],[1,"fw-bold"],[4,"ngFor","ngForOf"],["alt","Profile Image",1,"img-thumbnail","rounded-circle",3,"src"],["src","https://banffventureforum.com/wp-content/uploads/2019/08/no-photo-icon-22.png","alt","Profile Image",1,"img-thumbnail","rounded-circle"]],template:function(e,r){if(e&1){let l=C();o(0,"div",1)(1,"div",2),p(2,rt,1,1,"img",3)(3,at,1,0,"ng-template",null,0,E),i(),o(5,"div",4)(6,"div",5)(7,"p"),a(8),i(),u(9,"br")(10,"br")(11,"br"),i(),o(12,"div",1)(13,"div",6)(14,"p"),a(15),i()(),o(16,"div",7)(17,"p"),a(18),i()()()(),o(19,"div",8)(20,"div",5)(21,"p"),a(22),i(),u(23,"br")(24,"br")(25,"br"),i(),o(26,"div",1)(27,"div",9)(28,"p"),a(29),i()(),o(30,"div",9)(31,"p"),a(32),i()()()(),o(33,"div",10),u(34,"br")(35,"br"),o(36,"button",11),f("click",function(){return v(l),b(r.navigateToUpdateProfile())}),a(37,"Editar "),u(38,"i",12),i()()(),o(39,"div",13)(40,"p"),a(41),i()(),o(42,"div",14),u(43,"p",15),i(),o(44,"div",16)(45,"div",17)(46,"p",18),a(47,"Enlaces:"),i(),o(48,"ul"),p(49,st,2,1,"li",19),i()(),o(50,"div",17)(51,"p",18),a(52,"Habilidades:"),i(),o(53,"ul"),p(54,lt,2,1,"li",19),i()(),o(55,"div",17)(56,"p",18),a(57,"Intereses:"),i(),o(58,"ul"),p(59,ct,2,1,"li",19),i()()()}if(e&2){let l=I(4);s(2),c("ngIf",r.profileImageUrl)("ngIfElse",l),s(6),A("",r.profile.name," ",r.profile.lastname,""),s(7),h("",r.profile.seguidores," Seguidores"),s(3),h("",r.profile.seguidos," Seguidos"),s(4),_(r.profile.email),s(7),_(r.profile.gender),s(3),_(r.profile.birthday),s(9),_(r.profile.profileDesc),s(8),c("ngForOf",r.profile.socialLinks),s(5),c("ngForOf",r.profile.skills),s(5),c("ngForOf",r.profile.interest)}},dependencies:[O,y,S]})};function mt(n,t){if(n&1&&u(0,"img",37),n&2){let e=d();c("src",e.profileImageUrl,V)}}function dt(n,t){n&1&&u(0,"img",38)}function pt(n,t){if(n&1&&(o(0,"div",39),a(1," El nombre es obligatorio. "),i()),n&2){let e=d();c("hidden",e.profileform.pristine)}}function ut(n,t){if(n&1&&(o(0,"div",39),a(1," El apellido es obligatorio. "),i()),n&2){let e=d();c("hidden",e.profileform.pristine)}}function gt(n,t){if(n&1&&(o(0,"div",39),a(1," La descripcion no puede ser nula. "),i()),n&2){let e=d();c("hidden",e.profileform.pristine)}}function ft(n,t){if(n&1&&(o(0,"div",39),a(1," campo requerido "),i()),n&2){let e=d(2);c("hidden",e.profileform.pristine)}}function _t(n,t){if(n&1){let e=C();o(0,"div"),u(1,"input",40),o(2,"button",41),f("click",function(){let l=v(e).index,g=d();return b(g.removeInterest(l))}),u(3,"i",42),i(),p(4,ft,2,1,"div",15),i()}if(n&2){let e=t.index,r=d();s(),c("formControlName",e),s(3),c("ngIf",r.controlHasArrayError("interest","required",e))}}function vt(n,t){if(n&1&&(o(0,"div",39),a(1," campo requerido "),i()),n&2){let e=d(2);c("hidden",e.profileform.pristine)}}function bt(n,t){if(n&1){let e=C();o(0,"div"),u(1,"input",43),o(2,"button",41),f("click",function(){let l=v(e).index,g=d();return b(g.removeSkill(l))}),u(3,"i",42),i(),p(4,vt,2,1,"div",15),i()}if(n&2){let e=t.index,r=d();s(),c("formControlName",e),s(3),c("ngIf",r.controlHasArrayError("skills","required",e))}}function Ct(n,t){if(n&1&&(o(0,"div",39),a(1," campo requerido "),i()),n&2){let e=d(2);c("hidden",e.profileform.pristine)}}function ht(n,t){if(n&1){let e=C();o(0,"div"),u(1,"input",44),o(2,"button",41),f("click",function(){let l=v(e).index,g=d();return b(g.removeLink(l))}),u(3,"i",42),i(),p(4,Ct,2,1,"div",15),i()}if(n&2){let e=t.index,r=d();s(),c("formControlName",e),s(3),c("ngIf",r.controlHasArrayError("links","required",e))}}var Ue=class n{profileform;profile;fb=m(Me);userService=m(N);authService=m(U);router=m(M);snackbar=m(T);profileImageUrl;selectedFile=null;sanitizer=m(j);photoURL=`${R.baseURL}/user`;constructor(){this.profileform=this.fb.group({name:["",[z.required]],lastname:["",[z.required]],profileDesc:["",[z.required]],gender:["",[z.required]],birthday:["",[z.required]],interest:this.fb.array([]),skills:this.fb.array([]),socialLinks:this.fb.array([])})}ngOnInit(){this.loadUserProfile()}loadUserProfile(){let e=this.authService.getUser()?.id;e&&(this.userService.getUserProfile(e).subscribe({next:r=>{this.profile=r,this.profileform.patchValue(r),this.setFormArrayValues(this.interest,r.interest),this.setFormArrayValues(this.skills,r.skills),this.setFormArrayValues(this.socialLinks,r.socialLinks)},error:r=>{this.showSnackBar("Error al cargar el perfil")}}),this.userService.getProfileImage(e).subscribe({next:r=>{let l=URL.createObjectURL(r);this.profileImageUrl=this.sanitizer.bypassSecurityTrustUrl(l)},error:r=>{console.error("Error al cargar la imagen de perfil:",r)}}))}onFileSelected(t){let e=t.target;e.files&&e.files[0]&&(this.selectedFile=e.files[0])}onSubmit(){if(this.profileform.valid){let t=le(le({},this.profile),this.profileform.value);this.userService.updateUserProfile(this.profile.id,t).subscribe({next:()=>{this.showSnackBar("Perfil Actualizado Exitosamente."),this.authService.getUser()?.role=="ROLE_ORGANIZER"?this.selectedFile?this.userService.uploadProfileImage(this.selectedFile).subscribe({next:()=>{this.showSnackBar("Imagen de perfil subida exitosamente."),this.refreshProfileImage(this.profile.id)},error:e=>{console.error("Error al subir la imagen:",e),this.showSnackBar("Error al subir la imagen.")}}):this.router.navigate(["/organizer/cuenta/profile"]):this.selectedFile?this.userService.uploadProfileImage(this.selectedFile).subscribe({next:()=>{this.showSnackBar("Imagen de perfil subida exitosamente."),this.refreshProfileImage(this.profile.id)},error:e=>{console.error("Error al subir la imagen:",e),this.showSnackBar("Error al subir la imagen.")}}):this.router.navigateByUrl("/participant/cuenta/profile")},error:e=>{this.showSnackBar(e.error?.message||"Error al actualizar el perfil")}})}}refreshProfileImage(t){this.userService.getProfileImage(t).subscribe({next:e=>{let r=URL.createObjectURL(e);this.profileImageUrl=this.sanitizer.bypassSecurityTrustUrl(r),this.authService.getUser()?.role=="ROLE_ORGANIZER"?this.router.navigate(["/organizer/cuenta"]):this.router.navigate(["/participant/cuenta"])},error:e=>{console.error("No tienes ninguna foto asociada",e),this.profileImageUrl=""}})}removeProfileImage(){this.userService.deleteProfileImage().subscribe({next:()=>{this.showSnackBar("Foto eliminada correctamente"),this.profileImageUrl&&(URL.revokeObjectURL(this.profileImageUrl),this.profileImageUrl="")},error:t=>{this.showSnackBar(t.error?.message||"Error al eliminar la foto de perfil")}})}controlHasError(t,e){return this.profileform.controls[t].hasError(e)}controlHasArrayError(t,e,r){let l=this.profileform.get(t);return l.at(r).hasError(e)&&(l.at(r).touched||l.at(r).dirty)}showSnackBar(t){this.snackbar.open(t,"Close",{duration:2e3,verticalPosition:"top"})}setFormArrayValues(t,e){t.clear(),e.forEach(r=>t.push(this.fb.control(r,z.required)))}get interest(){return this.profileform.get("interest")}get skills(){return this.profileform.get("skills")}get socialLinks(){return this.profileform.get("socialLinks")}addInterest(t){this.interest.length===0||this.interest.at(this.interest.length-1).value?this.interest.push(this.fb.control(t,z.required)):this.showSnackBar("Por favor, completa el inter\xE9s anterior antes de agregar otro.")}addSkill(t){this.skills.length===0||this.skills.at(this.skills.length-1).value?this.skills.push(this.fb.control(t,z.required)):this.showSnackBar("Por favor, completa la hablidad anterior antes de agregar otra.")}addLink(t){this.socialLinks.length===0||this.socialLinks.at(this.socialLinks.length-1).value?this.socialLinks.push(this.fb.control(t,z.required)):this.showSnackBar("Por favor, completa el link anterior antes de agregar otro.")}removeInterest(t){this.interest.removeAt(t)}removeSkill(t){this.skills.removeAt(t)}removeLink(t){this.socialLinks.removeAt(t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-update-profile"]],standalone:!0,features:[P],decls:65,vars:9,consts:[["defaultImage",""],[1,"row",3,"ngSubmit","formGroup"],[1,"col-md-4"],[1,"row","p-0","text-center"],["alt","Profile Image","class","img-thumbnail",3,"src",4,"ngIf","ngIfElse"],[1,"row","mb-3"],["for","formFile",1,"form-label"],["type","file","id","formFile",1,"form-control",3,"change"],[1,"row","mt-3"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"col-md-6"],[1,"row"],[1,"row","p-2"],[1,"col"],["formControlName","name","placeholder","Nombre",1,"form-control"],["class","text-danger",3,"hidden",4,"ngIf"],["formControlName","lastname","placeholder","Apellido",1,"form-control"],["formControlName","profileDesc","placeholder","Descripcion",1,"form-control"],["formControlName","gender","placeholder","Genero",1,"form-select"],["value","Masculino"],["value","Femenino"],["value","Otro"],["type","date","formControlName","birthday","placeholder","Fecha Nacimiento","min","1935-01-01","max","2024-12-31",1,"form-control"],[1,"row","mt-2","p-3"],[1,"row","mt-2"],["formArrayName","interest",1,"col"],[1,"fw-bold"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-secondary",3,"click"],["formArrayName","skills",1,"col"],[1,"row","mt-4"],["formArrayName","socialLinks"],[1,"row","m-3","p-3"],[1,"col-md-3","offset-md-6"],["type","button","routerLink","/organizer/cuenta/profile",1,"btn","btn-outline-dark"],[1,"col-md-3"],["type","submit",1,"btn","color"],["alt","Profile Image",1,"img-thumbnail",3,"src"],["src","https://banffventureforum.com/wp-content/uploads/2019/08/no-photo-icon-22.png","alt","Profile Image",1,"img-thumbnail","rounded-circle"],[1,"text-danger",3,"hidden"],["placeholder","Interest",1,"mt-1","border","border-primary","rounded",3,"formControlName"],["type","button",1,"ms-2","btn","btn-outline-primary",3,"click"],[1,"fa-solid","fa-x"],["placeholder","Skill",1,"mt-1","border","border-primary","rounded",3,"formControlName"],["placeholder","socialLinks",1,"mt-1","border","border-primary","rounded",3,"formControlName"]],template:function(e,r){if(e&1){let l=C();o(0,"form",1),f("ngSubmit",function(){return v(l),b(r.onSubmit())}),o(1,"div",2)(2,"div",3),p(3,mt,1,1,"img",4)(4,dt,1,0,"ng-template",null,0,E),i(),o(6,"div",5)(7,"label",6),a(8,"Seleccionar Imagen: "),i(),o(9,"input",7),f("change",function(qe){return v(l),b(r.onFileSelected(qe))}),i()(),o(10,"div",8)(11,"button",9),f("click",function(){return v(l),b(r.removeProfileImage())}),a(12,"Quitar foto"),i()()(),o(13,"div",10)(14,"div",11)(15,"div",12)(16,"div",13),u(17,"input",14),p(18,pt,2,1,"div",15),i(),o(19,"div",13),u(20,"input",16),p(21,ut,2,1,"div",15),i()(),o(22,"div",12)(23,"div",13),u(24,"input",17),p(25,gt,2,1,"div",15),i()(),o(26,"div",12)(27,"div",2)(28,"select",18)(29,"option",19),a(30,"Masculino"),i(),o(31,"option",20),a(32,"Femenino"),i(),o(33,"option",21),a(34,"Otro"),i()()(),o(35,"div",2),u(36,"input",22),i()()(),o(37,"div",23)(38,"div",24)(39,"div",25)(40,"h6",26),a(41,"INTERESES:"),i(),p(42,_t,5,2,"div",27),o(43,"button",28),f("click",function(){return v(l),b(r.addInterest(""))}),a(44,"Add Interest"),i()(),o(45,"div",29)(46,"h6",26),a(47,"HABILIDADES:"),i(),p(48,bt,5,2,"div",27),o(49,"button",28),f("click",function(){return v(l),b(r.addSkill(""))}),a(50,"Add Skill"),i()()(),o(51,"div",30)(52,"div",31)(53,"h6",26),a(54,"LINKS:"),i(),p(55,ht,5,2,"div",27),o(56,"button",28),f("click",function(){return v(l),b(r.addLink(""))}),a(57,"Add Link"),i()()()(),o(58,"div",32)(59,"div",33)(60,"button",34),a(61,"Cancelar"),i()(),o(62,"div",35)(63,"button",36),a(64,"Guardar"),i()()()()()}if(e&2){let l=I(5);c("formGroup",r.profileform),s(3),c("ngIf",r.profileImageUrl)("ngIfElse",l),s(15),c("ngIf",r.controlHasError("name","required")),s(3),c("ngIf",r.controlHasError("lastname","required")),s(4),c("ngIf",r.controlHasError("profileDesc","required")),s(17),c("ngForOf",r.interest.controls),s(6),c("ngForOf",r.skills.controls),s(7),c("ngForOf",r.socialLinks.controls)}},dependencies:[O,y,S,Se,te,Oe,ye,q,Pe,H,X,Ce,xe,he,ve],styles:[".color[_ngcontent-%COMP%]{background:linear-gradient(to right,#010635,#03129b);color:#fff}.color[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#01152e,#022168);color:#4557fd}.img-thumbnail[_ngcontent-%COMP%]{max-height:350px}"]})};var G=class n{baseURL=`${R.baseURL}/user`;http=m($);getFollowersDetails(){return this.http.get(`${this.baseURL}/followers`)}getFollowingDetails(){return this.http.get(`${this.baseURL}/followings`)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};function xt(n,t){if(n&1){let e=C();o(0,"div",6),u(1,"div",7),o(2,"div",8)(3,"h3",9),a(4),i(),o(5,"p",10),u(6,"i",11),a(7),i()(),o(8,"button",12),f("click",function(){let l=v(e).$implicit,g=d(2);return b(g.navigateToDetailUser(l.id))}),a(9,"Ver Perfil"),i()()}if(n&2){let e=t.$implicit;s(4),A("",e.name," ",e.lastname,""),s(3),h(" ",e.email,"")}}function Pt(n,t){if(n&1&&(o(0,"div",4),p(1,xt,10,3,"div",5),i()),n&2){let e=d();s(),c("ngForOf",e.followers)}}function Ot(n,t){n&1&&(o(0,"div",13),u(1,"i",14),o(2,"h3"),a(3,"A\xFAn no tienes seguidores"),i()())}var Fe=class n{followers;router=m(M);followService=m(G);ngOnInit(){this.myFollowers()}myFollowers(){this.followService.getFollowersDetails().subscribe(t=>{this.followers=t})}navigateToDetailUser(t){let r=this.router.url.includes("/organizer")?"/organizer/cuenta":"/participant/cuenta";this.router.navigate([`${r}/search/user`,t])}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-seguidores"]],standalone:!0,features:[P],decls:6,vars:2,consts:[["nofollowers",""],[1,"seguidores-container"],[1,"seguidores-title"],["class","seguidores-grid",4,"ngIf","ngIfElse"],[1,"seguidores-grid"],["class","seguidor-card",4,"ngFor","ngForOf"],[1,"seguidor-card"],[1,"seguidor-avatar"],[1,"seguidor-info"],[1,"seguidor-name"],[1,"seguidor-email"],[1,"fa-solid","fa-at"],[1,"seguidor-button",3,"click"],[1,"no-seguidores"],[1,"fa-solid","fa-users-slash"]],template:function(e,r){if(e&1&&(o(0,"div",1)(1,"h2",2),a(2,"Mis Seguidores"),i(),p(3,Pt,2,1,"div",3),i(),p(4,Ot,4,0,"ng-template",null,0,E)),e&2){let l=I(5);s(3),c("ngIf",r.followers.length>0)("ngIfElse",l)}},dependencies:[O,y,S],styles:[".seguidores-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:1.8rem}.seguidores-container[_ngcontent-%COMP%]   .seguidores-title[_ngcontent-%COMP%]{text-align:start;color:#224d97;font-size:2.3rem}.seguidores-container[_ngcontent-%COMP%]   .seguidores-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:2rem}.seguidores-container[_ngcontent-%COMP%]   .seguidor-card[_ngcontent-%COMP%]{background-color:#e4e4e4;border-radius:10px;box-shadow:0 4px 6px #233494;overflow:hidden;transition:transform .3s ease}.seguidores-container[_ngcontent-%COMP%]   .seguidor-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.seguidores-container[_ngcontent-%COMP%]   .seguidor-card[_ngcontent-%COMP%]   .seguidor-avatar[_ngcontent-%COMP%]{width:100%;height:150px;overflow:hidden}.seguidores-container[_ngcontent-%COMP%]   .seguidor-card[_ngcontent-%COMP%]   .seguidor-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.seguidores-container[_ngcontent-%COMP%]   .seguidor-card[_ngcontent-%COMP%]   .seguidor-info[_ngcontent-%COMP%]{padding:1.5rem}.seguidores-container[_ngcontent-%COMP%]   .seguidor-card[_ngcontent-%COMP%]   .seguidor-info[_ngcontent-%COMP%]   .seguidor-name[_ngcontent-%COMP%]{font-size:1.2rem;color:#333;margin:0 0 .5rem}.seguidores-container[_ngcontent-%COMP%]   .seguidor-card[_ngcontent-%COMP%]   .seguidor-info[_ngcontent-%COMP%]   .seguidor-email[_ngcontent-%COMP%]{font-size:.9rem;color:#666;margin:0}.seguidores-container[_ngcontent-%COMP%]   .seguidor-card[_ngcontent-%COMP%]   .seguidor-info[_ngcontent-%COMP%]   .seguidor-email[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#285db8;margin-right:.5rem}.seguidores-container[_ngcontent-%COMP%]   .seguidor-card[_ngcontent-%COMP%]   .seguidor-button[_ngcontent-%COMP%]{display:block;width:100%;padding:.8rem;background:linear-gradient(90deg,#010635,#03129b);color:#fff;border:none;font-size:1rem;cursor:pointer;transition:background-color .3s ease}.seguidores-container[_ngcontent-%COMP%]   .seguidor-card[_ngcontent-%COMP%]   .seguidor-button[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#0a1cc4,#0c145a);color:#fff}.no-seguidores[_ngcontent-%COMP%]{text-align:center;padding:3rem;background-color:#f8f9fa;border-radius:10px;margin-top:2rem}.no-seguidores[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#285db8;margin-bottom:1rem}.no-seguidores[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:.5rem}.no-seguidores[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}"]})};function yt(n,t){if(n&1){let e=C();o(0,"div",6),u(1,"div",7),o(2,"div",8)(3,"h3",9),a(4),i(),o(5,"p",10),u(6,"i",11),a(7),i()(),o(8,"button",12),f("click",function(){let l=v(e).$implicit,g=d(2);return b(g.navigateToDetailUser(l.id))}),a(9,"Ver Perfil"),i()()}if(n&2){let e=t.$implicit;s(4),A("",e.name," ",e.lastname,""),s(3),h(" ",e.email,"")}}function Mt(n,t){if(n&1&&(o(0,"div",4),p(1,yt,10,3,"div",5),i()),n&2){let e=d();s(),c("ngForOf",e.Followings)}}function St(n,t){n&1&&(o(0,"div",13),u(1,"i",14),o(2,"h3"),a(3,"A\xFAn no tienes seguidos"),i()())}var Re=class n{Followings;router=m(M);followService=m(G);ngOnInit(){this.myFollowings()}myFollowings(){this.followService.getFollowingDetails().subscribe(t=>{this.Followings=t})}navigateToDetailUser(t){let r=this.router.url.includes("/organizer")?"/organizer/cuenta":"/participant/cuenta";this.router.navigate([`${r}/search/user`,t])}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-seguidos"]],standalone:!0,features:[P],decls:6,vars:2,consts:[["nofollowings",""],[1,"seguidos-container"],[1,"seguidos-title"],["class","seguidos-grid",4,"ngIf","ngIfElse"],[1,"seguidos-grid"],["class","seguidos-card",4,"ngFor","ngForOf"],[1,"seguidos-card"],[1,"seguidos-avatar"],[1,"seguidos-info"],[1,"seguidos-name"],[1,"seguidos-email"],[1,"fa-solid","fa-at"],[1,"seguidos-button",3,"click"],[1,"no-seguidos"],[1,"fa-solid","fa-users-slash"]],template:function(e,r){if(e&1&&(o(0,"div",1)(1,"h2",2),a(2,"Mis seguidos"),i(),p(3,Mt,2,1,"div",3),i(),p(4,St,4,0,"ng-template",null,0,E)),e&2){let l=I(5);s(3),c("ngIf",r.Followings.length>0)("ngIfElse",l)}},dependencies:[O,y,S],styles:[".seguidos-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:1.8rem}.seguidos-container[_ngcontent-%COMP%]   .seguidos-title[_ngcontent-%COMP%]{text-align:start;color:#224d97;font-size:2.3rem}.seguidos-container[_ngcontent-%COMP%]   .seguidos-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:2rem}.seguidos-container[_ngcontent-%COMP%]   .seguidos-card[_ngcontent-%COMP%]{background-color:#e4e4e4;border-radius:10px;box-shadow:0 4px 6px #233494;overflow:hidden;transition:transform .3s ease}.seguidos-container[_ngcontent-%COMP%]   .seguidos-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.seguidos-container[_ngcontent-%COMP%]   .seguidos-card[_ngcontent-%COMP%]   .seguidos-avatar[_ngcontent-%COMP%]{width:100%;height:150px;overflow:hidden}.seguidos-container[_ngcontent-%COMP%]   .seguidos-card[_ngcontent-%COMP%]   .seguidos-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.seguidos-container[_ngcontent-%COMP%]   .seguidos-card[_ngcontent-%COMP%]   .seguidos-info[_ngcontent-%COMP%]{padding:1.5rem}.seguidos-container[_ngcontent-%COMP%]   .seguidos-card[_ngcontent-%COMP%]   .seguidos-info[_ngcontent-%COMP%]   .seguidos-name[_ngcontent-%COMP%]{font-size:1.2rem;color:#333;margin:0 0 .5rem}.seguidos-container[_ngcontent-%COMP%]   .seguidos-card[_ngcontent-%COMP%]   .seguidos-info[_ngcontent-%COMP%]   .seguidos-email[_ngcontent-%COMP%]{font-size:.9rem;color:#666;margin:0}.seguidos-container[_ngcontent-%COMP%]   .seguidos-card[_ngcontent-%COMP%]   .seguidos-info[_ngcontent-%COMP%]   .seguidos-email[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#285db8;margin-right:.5rem}.seguidos-container[_ngcontent-%COMP%]   .seguidos-card[_ngcontent-%COMP%]   .seguidos-button[_ngcontent-%COMP%]{display:block;width:100%;padding:.8rem;background:linear-gradient(90deg,#010635,#03129b);color:#fff;border:none;font-size:1rem;cursor:pointer;transition:background-color .3s ease}.seguidos-container[_ngcontent-%COMP%]   .seguidos-card[_ngcontent-%COMP%]   .seguidos-button[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#0a1cc4,#0c145a);color:#fff}.no-seguidos[_ngcontent-%COMP%]{text-align:center;padding:3rem;background-color:#f8f9fa;border-radius:10px;margin-top:2rem}.no-seguidos[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#285db8;margin-bottom:1rem}.no-seguidos[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:.5rem}.no-seguidos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}"]})};var oe=class n{baseURL=`${R.baseURL}/user`;http=m($);getRatingsByUserId(t){return this.http.get(`${this.baseURL}/rated/${t}`)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var re=class n{FOLLOWING_KEY="following_users";authService=m(U);getCurrentUserKey(){let t=this.authService.getUser();return t?`${this.FOLLOWING_KEY}${t.id}`:""}getFollowingUsers(){let t=this.getCurrentUserKey();if(!t)return[];let e=localStorage.getItem(t);return e?JSON.parse(e):[]}setFollowingUsers(t){let e=this.getCurrentUserKey();e&&localStorage.setItem(e,JSON.stringify(t))}addFollowingUser(t){let e=this.getFollowingUsers();e.includes(t)||(e.push(t),this.setFollowingUsers(e))}removeFollowingUser(t){let e=this.getFollowingUsers(),r=e.indexOf(t);r>-1&&(e.splice(r,1),this.setFollowingUsers(e))}isFollowing(t){return this.getFollowingUsers().includes(t)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var Le=()=>[1,2,3,4,5],De=n=>({filled:n});function wt(n,t){if(n&1&&u(0,"img",29),n&2){let e=d();c("src",e.profileImageUrl,V)}}function Et(n,t){n&1&&u(0,"img",30)}function It(n,t){if(n&1){let e=C();o(0,"button",31),f("click",function(){v(e);let l=d();return b(l.followUser())}),a(1,"Seguir"),i()}}function Ut(n,t){if(n&1){let e=C();o(0,"button",32),f("click",function(){v(e);let l=d();return b(l.unfollowUser())}),a(1,"Dejar de Seguir"),i()}}function kt(n,t){if(n&1&&(o(0,"li"),a(1),i()),n&2){let e=t.$implicit;s(),_(e)}}function Ft(n,t){if(n&1&&(o(0,"li"),a(1),i()),n&2){let e=t.$implicit;s(),_(e)}}function Rt(n,t){if(n&1&&(o(0,"li"),a(1),i()),n&2){let e=t.$implicit;s(),_(e)}}function Tt(n,t){if(n&1&&(o(0,"li",39),a(1," \u2605 "),i()),n&2){let e=t.index,r=d().$implicit;c("ngClass",me(1,De,e<r.ratingValue))}}function Lt(n,t){if(n&1&&(o(0,"div",33)(1,"div",24),u(2,"img",34),i(),o(3,"div",35)(4,"div",1)(5,"p"),a(6),i(),o(7,"p"),a(8),i()()(),o(9,"div",36)(10,"strong"),a(11,"Calificacion:"),i(),o(12,"ul",37),p(13,Tt,2,3,"li",38),i()()()),n&2){let e=t.$implicit;s(6),_(e.userCalificado),s(2),_(e.comment),s(5),c("ngForOf",ce(3,Le))}}function Dt(n,t){if(n&1){let e=C();o(0,"li",40),f("click",function(){let l=v(e).index,g=d();return b(g.rate(l+1))})("mouseover",function(){let l=v(e).index,g=d();return b(g.setHoverRating(l+1))})("mouseout",function(){v(e);let l=d();return b(l.setHoverRating(0))}),a(1," \u2605 "),i()}if(n&2){let e=t.index,r=d();c("ngClass",me(1,De,e<r.hoverRating||e<r.newRating))}}function zt(n,t){if(n&1&&u(0,"img",29),n&2){let e=d();c("src",e.profileImageUrl,V)}}function Nt(n,t){n&1&&u(0,"img",30)}var Te=class n{userId;profile={};profileImageUrl;ratings;profile1;profileImageUrl1;isFollowing=!1;userProfileService=m(N);snackbar=m(T);sanitizer=m(j);route=m(K);ratingService=m(oe);followStorage=m(re);ngOnInit(){this.route.paramMap.subscribe(t=>{this.userId=+t.get("id"),this.loadOtherUserProfile()}),this.loadRatingsUser()}loadOtherUserProfile(){this.userProfileService.getUserProfile(this.userId).subscribe({next:t=>{this.profile=t,this.checkFollowingStatus()},error:t=>{this.showSnackBar("Error al cargar el perfil")}})}showSnackBar(t){this.snackbar.open(t,"Close",{duration:2e3,verticalPosition:"top"})}loadRatingsUser(){this.ratingService.getRatingsByUserId(this.userId).subscribe({next:t=>{this.ratings=t},error:t=>{console.log(t)}})}newRating=0;hoverRating=0;rate(t){this.newRating=t}setHoverRating(t){this.hoverRating=t}checkFollowingStatus(){this.isFollowing=this.followStorage.isFollowing(this.userId)}followUser(){this.userProfileService.followUser(this.userId).subscribe({next:()=>{this.followStorage.addFollowingUser(this.userId),this.isFollowing=!0,this.loadOtherUserProfile(),this.showSnackBar("Usuario seguido con exito.")},error:t=>{this.showSnackBar("Error al seguir al usuario")}})}unfollowUser(){this.userProfileService.unfollowUser(this.userId).subscribe({next:()=>{this.followStorage.removeFollowingUser(this.userId),this.isFollowing=!1,this.loadOtherUserProfile(),this.showSnackBar("A dejado de seguir al usuario con exito.")},error:t=>{this.showSnackBar("Error al dejar de seguir al usuario")}})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-other-user-profile"]],standalone:!0,features:[P],decls:75,vars:21,consts:[["defaultImage",""],[1,"row"],[1,"col-md-1","p-0","text-center"],["alt","Profile Image","class","img-thumbnail rounded-circle",3,"src",4,"ngIf","ngIfElse"],[1,"col-md-4","p-0","text-center"],[1,"row","mt-2"],[1,"col-md-6"],[1,"col-md-5","p-0"],[1,"col-md-2"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-secondary",3,"click",4,"ngIf"],[1,"row","mt-2","pt-2"],[1,"line","p-0"],[1,"p-0","border","border-dark","border-2","opacity-100"],[1,"row","ms-5"],[1,"col"],[1,"fw-bold"],[4,"ngFor","ngForOf"],[1,"row","d-flex","justify-content-center","ratings"],["class","col-8 d-flex flex-row p-3",4,"ngFor","ngForOf"],[1,"row","d-flex","justify-content-center","p-5"],[1,"row","d-flex"],[1,"rating","r1","justify-content-center"],[3,"ngClass","click","mouseover","mouseout",4,"ngFor","ngForOf"],[1,"col-2"],[1,"col-8"],["rows","3","placeholder","Escribe un comentario",1,"form-control"],[1,"row","d-flex","justify-content-end"],[1,"btn"],["alt","Profile Image",1,"img-thumbnail","rounded-circle",3,"src"],["src","https://banffventureforum.com/wp-content/uploads/2019/08/no-photo-icon-22.png","alt","Profile Image",1,"img-thumbnail","rounded-circle"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"col-8","d-flex","flex-row","p-3"],["src","https://banffventureforum.com/wp-content/uploads/2019/08/no-photo-icon-22.png","alt","Profile Image",1,"img","rounded-circle"],[1,"col-6"],[1,"col-md-4"],[1,"rating"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"click","mouseover","mouseout","ngClass"]],template:function(e,r){if(e&1&&(o(0,"div",1)(1,"div",2),p(2,wt,1,1,"img",3)(3,Et,1,0,"ng-template",null,0,E),i(),o(5,"div",4)(6,"div",5)(7,"strong"),a(8),i()(),o(9,"div",1)(10,"div",6)(11,"p"),a(12),i()(),o(13,"div",6)(14,"p"),a(15),i()()()(),o(16,"div",7)(17,"div",5)(18,"p"),a(19),i()(),o(20,"div",1)(21,"div",6)(22,"p"),a(23),i()(),o(24,"div",6)(25,"p"),a(26),i()()()(),o(27,"div",8),p(28,It,2,0,"button",9)(29,Ut,2,0,"button",10),i()(),o(30,"div",11)(31,"p"),a(32),i()(),o(33,"div",12),u(34,"p",13),i(),o(35,"div",14)(36,"div",15)(37,"p",16),a(38,"Enlaces:"),i(),o(39,"ul"),p(40,kt,2,1,"li",17),i()(),o(41,"div",15)(42,"p",16),a(43,"Habilidades:"),i(),o(44,"ul"),p(45,Ft,2,1,"li",17),i()(),o(46,"div",15)(47,"p",16),a(48,"Intereses:"),i(),o(49,"ul"),p(50,Rt,2,1,"li",17),i()()(),o(51,"div",12),u(52,"p",13),i(),o(53,"div",18)(54,"h5"),a(55,"Calificaciones del Usuario"),i(),p(56,Lt,14,4,"div",19),i(),o(57,"div",20)(58,"div",21)(59,"ul",22),p(60,Dt,2,3,"li",23),i(),o(61,"p"),a(62),i()(),o(63,"div",1)(64,"div",24)(65,"div"),p(66,zt,1,1,"img",3)(67,Nt,1,0,"ng-template",null,0,E),i()(),o(69,"div",25),u(70,"textarea",26),i()(),o(71,"div",27)(72,"div",24)(73,"button",28),a(74," Publicar "),i()()()()),e&2){let l=I(4);s(2),c("ngIf",r.profileImageUrl)("ngIfElse",l),s(6),A("",r.profile.name," ",r.profile.lastname,""),s(4),h("",r.profile.seguidores," Seguidores"),s(3),h("",r.profile.seguidos," Seguidos"),s(4),h("Contacto: ",r.profile.email,""),s(4),h("Sexo: ",r.profile.gender,""),s(3),h("Cumplea\xF1os: ",r.profile.birthday,""),s(2),c("ngIf",!r.isFollowing),s(),c("ngIf",r.isFollowing),s(3),_(r.profile.profileDesc),s(8),c("ngForOf",r.profile.socialLinks),s(5),c("ngForOf",r.profile.skills),s(5),c("ngForOf",r.profile.interest),s(6),c("ngForOf",r.ratings),s(4),c("ngForOf",ce(20,Le)),s(2),h("",r.newRating," puntos"),s(4),c("ngIf",r.profileImageUrl)("ngIfElse",l)}},dependencies:[O,fe,y,S],styles:['@charset "UTF-8";.row[_ngcontent-%COMP%]{margin:0;padding:0}.row.mt-2.pt-2[_ngcontent-%COMP%]{padding-top:1rem;color:#343a40}.line[_ngcontent-%COMP%]{width:100%;height:2px;background:#dee2e6;margin-top:1rem;margin-bottom:1rem}.text-center[_ngcontent-%COMP%]{text-align:center}.img-thumbnail.rounded-circle[_ngcontent-%COMP%]{width:80px;height:80px;object-fit:cover;border:2px solid linear-gradient(90deg,#010635 0%,#03129B 100%)}.col-md-4[_ngcontent-%COMP%], .col-md-5[_ngcontent-%COMP%]{background:#f0f2f5;padding:1rem;border-radius:8px;color:#343a40}.col-md-4[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .col-md-5[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#343a40;margin:.5rem 0;font-weight:700}.col-md-6[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#6c757d}button.btn[_ngcontent-%COMP%]{background:linear-gradient(90deg,#010635,#03129b);color:#f8f9fa;font-weight:700;border-radius:8px;border:2px solid #03129B;padding:.5rem 1rem}button.btn[_ngcontent-%COMP%]:hover{background:#fff;color:#03129b;transform:translateY(-2px);box-shadow:0 5px 7px #0000001a}.mt-2.pt-2[_ngcontent-%COMP%]{color:#6c757d;font-size:1rem}ul[_ngcontent-%COMP%]{padding-left:1.5rem}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#343a40;font-weight:500;font-size:.9rem}.fw-bold[_ngcontent-%COMP%]{font-weight:700;color:#343a40}.ratings[_ngcontent-%COMP%]{background:#f0f2f5;padding:1rem;color:#343a40;border-radius:8px;text-align:center}.ratings[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:700;color:#343a40;margin-bottom:1rem}.ratings[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;border:2px solid linear-gradient(90deg,#010635 0%,#03129B 100%)}.ratings[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]{border:2px solid linear-gradient(90deg,#010635 0%,#03129B 100%)}.ratings[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#343a40;font-size:.9rem}.ratings[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#343a40;font-size:.95rem}.ratings[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#03129b;font-weight:700;font-size:1rem}.rating[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex}.rating[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:30px;color:gray;margin-right:5px}.r1[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;font-size:50px!important}.rating[_ngcontent-%COMP%]   li.filled[_ngcontent-%COMP%]{color:#03129b}']})};var ae=class n{isLoadingSubject=new pe(!1);isLoading$=this.isLoadingSubject.asObservable();setLoading(t){this.isLoadingSubject.next(t)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var se=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-loading-spinner"]],standalone:!0,features:[P],decls:2,vars:0,consts:[[1,"spinner-overlay"],[1,"spinner"]],template:function(e,r){e&1&&(o(0,"div",0),u(1,"div",1),i())},styles:[".spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:9999}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:3px solid #f3f3f3;border-top:3px solid #03129B;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};function Vt(n,t){n&1&&(o(0,"div",7),u(1,"app-loading-spinner"),i())}function Bt(n,t){if(n&1&&u(0,"img",14),n&2){let e=d(2);c("src",e.profileImageUrl,V)}}function At(n,t){n&1&&u(0,"img",15)}function $t(n,t){if(n&1){let e=C();o(0,"div",8)(1,"div",9)(2,"div",10),p(3,Bt,1,1,"img",11)(4,At,1,0,"ng-template",null,0,E),o(6,"strong"),a(7),i(),o(8,"p"),a(9),i(),o(10,"p"),a(11),i()(),o(12,"div",12)(13,"button",13),f("click",function(){let l=v(e).$implicit,g=d();return b(g.navigateToDetailUser(l.id))}),a(14,"Ver Perfil"),i()()()()}if(n&2){let e=t.$implicit,r=I(5),l=d();s(3),c("ngIf",l.profileImageUrl)("ngIfElse",r),s(4),_(e.name),s(2),_(e.lastname),s(2),h("Correo: ",e.email,"")}}var ze=class n{userAvailable=[];filterUsers=[];profileImageUrl;searchQuery="";loadingService=m(ae);userProfileService=m(N);router=m(M);snackbar=m(T);sanitizer=m(j);isLoading$=this.loadingService.isLoading$;ngOnInit(){this.loadingService.setLoading(!0),this.userProfileService.getAllUser().subscribe({next:t=>{this.userAvailable=t,this.filterUsers=t,this.loadingService.setLoading(!1)}})}onSearch(){let t=this.searchQuery.toLocaleLowerCase();this.filterUsers=this.userAvailable.filter(e=>e.name.toLocaleLowerCase().includes(t)||e.lastname.toLocaleLowerCase().includes(t))}navigateToDetailUser(t){let r=this.router.url.includes("/organizer")?"/organizer/cuenta":"/participant/cuenta";this.router.navigate([`${r}/search/user`,t])}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-search-users"]],standalone:!0,features:[P],decls:11,vars:5,consts:[["defaultImage",""],[1,"row"],["role","search",1,""],["placeholder","Buscar por nombre",1,"form-control","border-primary","rounded-pill","border","border-3",3,"ngModelChange","ngModel"],["class","loading-overlay",4,"ngIf"],[1,"container-fluid","row"],["class","col-md-4 card-comu",4,"ngFor","ngForOf"],[1,"loading-overlay"],[1,"col-md-4","card-comu"],[1,"row","d-flex","flex-row","align-items-center"],[1,"col-md-8"],["alt","Profile Image","class","img-thumbnail rounded-circle",3,"src",4,"ngIf","ngIfElse"],[1,"col-md-4"],[1,"btn","btn-com","btn-outline-primary",3,"click"],["alt","Profile Image",1,"img-thumbnail","rounded-circle",3,"src"],["src","https://banffventureforum.com/wp-content/uploads/2019/08/no-photo-icon-22.png","alt","Profile Image",1,"img-thumbnail","rounded-circle"]],template:function(e,r){e&1&&(o(0,"div",1)(1,"p"),a(2,"Buscar"),i(),o(3,"div",2)(4,"input",3),Y("ngModelChange",function(g){return W(r.searchQuery,g)||(r.searchQuery=g),g}),f("ngModelChange",function(){return r.onSearch()}),i()()(),p(5,Vt,2,0,"div",4),ue(6,"async"),o(7,"div",5)(8,"h3"),a(9,"Usuarios Encontrados"),i(),p(10,$t,15,5,"div",6),i()),e&2&&(s(4),J("ngModel",r.searchQuery),s(),c("ngIf",ge(6,3,r.isLoading$)),s(5),c("ngForOf",r.filterUsers))},dependencies:[O,y,S,_e,ne,q,H,ee,se],styles:[".row[_ngcontent-%COMP%]{margin-bottom:20px}.card-comu[_ngcontent-%COMP%]{padding:20px}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{background-color:#f3f3f3;border-radius:8px;box-shadow:0 4px 6px #0000001a;padding:15px;transition:transform .3s ease}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-8[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.25rem;color:#333;display:block;margin-bottom:10px}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-8[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.05rem;color:#000;margin-bottom:5px}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-8[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-of-type{font-style:italic;font-size:.85rem;color:#9b9b9b}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-bottom:10px;padding:8px 15px;border-radius:20px;font-weight:700;transition:all .3s ease}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]   .btn.btn-uni[_ngcontent-%COMP%]{background:linear-gradient(270deg,#010635,#03129b);color:#fff;border:2px solid #0a125c}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]   .btn.btn-uni[_ngcontent-%COMP%]:hover{color:#03129b;background:#fff}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]   .btn.btn-com[_ngcontent-%COMP%]{background-color:#fff;color:#0a125c;border:2px solid #0a125c}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]   .btn.btn-com[_ngcontent-%COMP%]:hover{background:linear-gradient(270deg,#010635,#03129b);color:#fff}img[_ngcontent-%COMP%]{width:50px}"]})};var L=class n{baseURL=`${R.baseURL}/community`;baseURL2=`${R.baseURL}/admin/usercommunity`;http=m($);getAllCommunities(){return this.http.get(`${this.baseURL}/communities`)}getCommunityById(t){return this.http.get(`${this.baseURL}/search/${t}`)}getCommunitiesByUser(){return this.http.get(`${this.baseURL}/my-communities`)}updateCommunity(t,e){return this.http.put(`${this.baseURL}/update/${t}`,e)}deleteCommunity(t){return this.http.delete(`${this.baseURL}/delete/${t}`)}getComunitiesPertainByUser(){return this.http.get(`${this.baseURL2}/pertains`)}joinCommunity(t){return this.http.post(`${this.baseURL2}/${t}`,{},{responseType:"text"})}leaveCommunity(t,e){return this.http.delete(`${this.baseURL2}/${t}/${e}`,{responseType:"text"})}static \u0275fac=function(e){return new(e||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};function jt(n,t){if(n&1){let e=C();o(0,"div",2)(1,"div",3)(2,"div",4)(3,"strong"),a(4),i(),o(5,"p"),a(6),i(),o(7,"p"),a(8),i()(),o(9,"div",5)(10,"button",6),f("click",function(){let l=v(e).$implicit,g=d();return b(g.navigateToDetail(l.idCommunity))}),a(11," ver"),i()()()()}if(n&2){let e=t.$implicit;s(4),_(e.nameCommunity),s(2),_(e.descriptionCommunity),s(2),h(" Te uniste el: ",e.date,"")}}var Ve=class n{comunitiesByUser;communityService=m(L);router=m(M);ngOnInit(){this.getCommunitiesPertainByUser()}getCommunitiesPertainByUser(){this.communityService.getComunitiesPertainByUser().subscribe({next:t=>{this.comunitiesByUser=t,console.log("Communities by user:",t)},error:t=>{console.error("Error fetching communities by user:",t)}})}navigateToDetail(t){console.log("Navigating to community:",t);let r=this.router.url.includes("/organizer")?"/organizer/comunidades":"/participant/comunidades";this.router.navigate([`${r}/perteneces/comunidad`,t])}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-comunity-pertain"]],standalone:!0,features:[P],decls:4,vars:1,consts:[[1,"container-fluid","row"],["class","col-md-4 card-comu",4,"ngFor","ngForOf"],[1,"col-md-4","card-comu"],[1,"row"],[1,"col-md-8"],[1,"col-md-4"],[1,"btn","btn-com",3,"click"]],template:function(e,r){e&1&&(o(0,"div",0)(1,"h3"),a(2,"Comunidades a las que Perteneces"),i(),p(3,jt,12,3,"div",1),i()),e&2&&(s(3),c("ngForOf",r.comunitiesByUser))},dependencies:[O,y],styles:[".row[_ngcontent-%COMP%]{margin-bottom:20px}.card-comu[_ngcontent-%COMP%]{padding:20px}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{background-color:#f3f3f3;border-radius:8px;box-shadow:0 4px 6px #0000001a;padding:15px;transition:transform .3s ease}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-8[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.25rem;color:#333;display:block;margin-bottom:10px}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-8[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.05rem;color:#000;margin-bottom:5px}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-8[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-of-type{font-style:italic;font-size:.85rem;color:#9b9b9b}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-bottom:10px;padding:8px 15px;border-radius:20px;font-weight:700;transition:all .3s ease}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]   .btn.btn-uni[_ngcontent-%COMP%]{background:linear-gradient(270deg,#010635,#03129b);color:#fff;border:2px solid #0a125c}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]   .btn.btn-uni[_ngcontent-%COMP%]:hover{color:#03129b;background:#fff}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]   .btn.btn-com[_ngcontent-%COMP%]{background-color:#fff;color:#0a125c;border:2px solid #0a125c}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]   .btn.btn-com[_ngcontent-%COMP%]:hover{background:linear-gradient(270deg,#010635,#03129b);color:#fff}"]})};function qt(n,t){if(n&1){let e=C();o(0,"button",8),f("click",function(){v(e);let l=d().$implicit,g=d();return b(g.joinCommunity(l.id))}),a(1,"Unirse"),i()}}function Ht(n,t){if(n&1){let e=C();o(0,"button",8),f("click",function(){v(e);let l=d().$implicit,g=d();return b(g.leaveCommunity(l.id))}),a(1,"Salir"),i()}}function Gt(n,t){if(n&1){let e=C();o(0,"div",2)(1,"div",3)(2,"div",4)(3,"strong"),a(4),i(),o(5,"p"),a(6),i(),o(7,"p"),a(8),i()(),o(9,"div",5),a(10),p(11,qt,2,0,"button",6)(12,Ht,2,0,"button",6),o(13,"button",7),f("click",function(){let l=v(e).$implicit,g=d();return b(g.navigateToDetail(l.id))}),a(14," ver"),i()()()()}if(n&2){let e=t.$implicit,r=d();s(4),_(e.name),s(2),_(e.descripcion),s(2),h(" Comunidad de ",e.owner.name,""),s(2),h(" ",e.id," "),s(),c("ngIf",!r.isJoined(e.id)),s(),c("ngIf",r.isJoined(e.id))}}var Be=class n{comunitiesAvailable;communityService=m(L);router=m(M);snackBar=m(T);authService=m(U);communityStateService=m(Z);ngOnInit(){this.getCommunitiesAvailable()}getCommunitiesAvailable(){this.communityService.getAllCommunities().subscribe(t=>{this.comunitiesAvailable=t})}navigateToDetail(t){let r=this.router.url.includes("/organizer")?"/organizer/comunidades":"/participant/comunidades";this.router.navigate([`${r}/disponibles/comunidad`,t])}isJoined(t){return this.communityStateService.isJoined(t)}joinCommunity(t){this.communityService.joinCommunity(t).subscribe({next:e=>{this.communityStateService.setJoinedState(t,!0),this.showSnackBar(e)},error:e=>{this.showSnackBar(e.error)}})}leaveCommunity(t){let e=this.authService.getCurrentUserId();e&&this.communityService.leaveCommunity(e,t).subscribe({next:r=>{this.communityStateService.setJoinedState(t,!1),this.showSnackBar(r)},error:r=>{this.showSnackBar(r.error)}})}showSnackBar(t){this.snackBar.open(t,"Cerrar",{duration:3e3,horizontalPosition:"center",verticalPosition:"top"})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-comunity-available"]],standalone:!0,features:[P],decls:4,vars:1,consts:[[1,"container-fluid","row"],["class","col-md-4 card-comu",4,"ngFor","ngForOf"],[1,"col-md-4","card-comu"],[1,"row"],[1,"col-md-8"],[1,"col-md-4"],["class","btn btn-uni",3,"click",4,"ngIf"],[1,"btn","btn-com",3,"click"],[1,"btn","btn-uni",3,"click"]],template:function(e,r){e&1&&(o(0,"div",0)(1,"h3"),a(2,"Comunidades Disponibles"),i(),p(3,Gt,15,6,"div",1),i()),e&2&&(s(3),c("ngForOf",r.comunitiesAvailable))},dependencies:[O,y,S],styles:[".row[_ngcontent-%COMP%]{margin-bottom:20px}.card-comu[_ngcontent-%COMP%]{padding:20px}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{background-color:#f3f3f3;border-radius:8px;box-shadow:0 4px 6px #0000001a;padding:15px;transition:transform .3s ease}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-8[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.25rem;color:#333;display:block;margin-bottom:10px}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-8[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.05rem;color:#000;margin-bottom:5px}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-8[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-of-type{font-style:italic;font-size:.85rem;color:#9b9b9b}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-bottom:10px;padding:8px 15px;border-radius:20px;font-weight:700;transition:all .3s ease}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]   .btn.btn-uni[_ngcontent-%COMP%]{background:linear-gradient(270deg,#010635,#03129b);color:#fff;border:2px solid #0a125c}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]   .btn.btn-uni[_ngcontent-%COMP%]:hover{color:#03129b;background:#fff}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]   .btn.btn-com[_ngcontent-%COMP%]{background-color:#fff;color:#0a125c;border:2px solid #0a125c}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]   .btn.btn-com[_ngcontent-%COMP%]:hover{background:linear-gradient(270deg,#010635,#03129b);color:#fff}"]})};function Yt(n,t){if(n&1){let e=C();o(0,"div",2)(1,"div",0)(2,"div",3)(3,"strong"),a(4),i(),o(5,"p"),a(6),i()(),o(7,"div",4)(8,"button",5),f("click",function(){let l=v(e).$implicit,g=d();return b(g.goDetail(l.id))}),a(9,"Editar"),i()()()()}if(n&2){let e=t.$implicit;s(4),_(e.name),s(2),_(e.descripcion)}}var Ae=class n{constructor(t,e,r){this.comunityService=t;this.router=e;this.authService=r}comunities=[];baseRoute;ngOnInit(){console.log("Obteniendo comunidades creadas por el usuario",this.authService.getUser()),this.setBaseRoute(),this.getMyComunities()}setBaseRoute(){this.authService.getUser()?.role==="ROLE_ORGANIZER"?this.baseRoute="/organizer":this.baseRoute="/participant",console.log(`Base route set to: ${this.baseRoute}`)}getMyComunities(){this.comunityService.getCommunitiesByUser().subscribe(t=>{console.log("Comunidades obtenidas",t),this.comunities=t})}goDetail(t){this.baseRoute||this.setBaseRoute();let e=`${this.baseRoute}/comunidades/creados/manage/${t}`;this.router.navigate([e]),console.log(`Navigating to: ${e}`)}static \u0275fac=function(e){return new(e||n)(B(L),B(M),B(U))};static \u0275cmp=x({type:n,selectors:[["app-comunity-created"]],standalone:!0,features:[P],decls:5,vars:1,consts:[[1,"row"],["class","col-md-4 card-comu",4,"ngFor","ngForOf"],[1,"col-md-4","card-comu"],[1,"col-md-8"],[1,"col-md-4"],[1,"btn","btn-com",3,"click"]],template:function(e,r){e&1&&(o(0,"p"),a(1,"Mis comunidades creadas"),i(),u(2,"div",0),o(3,"div",0),p(4,Yt,10,2,"div",1),i()),e&2&&(s(4),c("ngForOf",r.comunities))},dependencies:[O,y],styles:[".c1[_ngcontent-%COMP%]{margin-bottom:10px}.row[_ngcontent-%COMP%]{margin-bottom:20px}.card-comu[_ngcontent-%COMP%]{padding:20px}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{background-color:#f3f3f3;border-radius:8px;box-shadow:0 4px 6px #0000001a;padding:15px;transition:transform .3s ease}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-8[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.25rem;color:#333;display:block;margin-bottom:10px}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-8[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.05rem;color:#000;margin-bottom:5px}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-8[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-of-type{font-style:italic;font-size:.85rem;color:#9b9b9b}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-bottom:10px;padding:8px 15px;border-radius:20px;font-weight:700;transition:all .3s ease}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]   .btn.btn-uni[_ngcontent-%COMP%]{background:linear-gradient(270deg,#010635,#03129b);color:#fff;border:2px solid #0a125c}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]   .btn.btn-uni[_ngcontent-%COMP%]:hover{color:#03129b;background:#fff}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]   .btn.btn-com[_ngcontent-%COMP%]{background-color:#fff;color:#0a125c;border:2px solid #0a125c}.card-comu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]   .btn.btn-com[_ngcontent-%COMP%]:hover{background:linear-gradient(270deg,#010635,#03129b);color:#fff}"]})};function Qt(n,t){if(n&1){let e=C();o(0,"button",12),f("click",function(){v(e);let l=d();return b(l.joinCommunity())}),a(1,"Unirse"),i()}}function Kt(n,t){if(n&1){let e=C();o(0,"button",12),f("click",function(){v(e);let l=d();return b(l.leaveCommunity())}),a(1,"Salir"),i()}}function Zt(n,t){if(n&1&&(o(0,"div",13),u(1,"img",14),o(2,"div",15)(3,"p",16),a(4),i(),o(5,"p",17),a(6),i(),o(7,"p",18),a(8),i(),o(9,"p",19),a(10),i()()()),n&2){let e=t.$implicit;s(4),_(e.autor.name),s(2),_(e.autor.email),s(2),_(e.body),s(2),h("Fecha: ",e.created,"")}}var $e=class n{comunitieDetail;isJoined=!1;communityService=m(L);router=m(M);snackBar=m(T);authService=m(U);communityStateService=m(Z);ngOnInit(){this.detailEvent()}detailEvent(){let t=parseInt(this.router.url.split("/")[5]);this.communityService.getCommunityById(t).subscribe(e=>{this.comunitieDetail=e,this.isJoined=this.communityStateService.isJoined(t)})}volverComunidades(){this.router.url.includes("/organizer")?this.router.url.includes("/disponibles")?this.router.navigate(["/organizer/comunidades/disponibles"]):this.router.url.includes("/perteneces")&&this.router.navigate(["/organizer/comunidades/perteneces"]):this.router.url.includes("/disponibles")?this.router.navigate(["/participant/comunidades/disponibles"]):this.router.url.includes("/perteneces")&&this.router.navigate(["/participant/comunidades/perteneces"])}joinCommunity(){this.comunitieDetail&&this.communityService.joinCommunity(this.comunitieDetail.id).subscribe({next:t=>{this.isJoined=!0,this.communityStateService.setJoinedState(this.comunitieDetail.id,!0),this.showSnackBar(t)},error:t=>{this.showSnackBar(t.error)}})}leaveCommunity(){if(!this.comunitieDetail)return;let t=this.authService.getCurrentUserId();t&&this.communityService.leaveCommunity(t,this.comunitieDetail.id).subscribe({next:e=>{this.isJoined=!1,this.communityStateService.setJoinedState(this.comunitieDetail.id,!1),this.showSnackBar(e)},error:e=>{this.showSnackBar(e.error)}})}showSnackBar(t){this.snackBar.open(t,"Cerrar",{duration:3e3,horizontalPosition:"center",verticalPosition:"top"})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-comunity-detail"]],standalone:!0,features:[P],decls:24,vars:7,consts:[[1,"container-fluid"],[1,"row","encabezado"],[1,"col-md-2","atras"],[1,"btn",3,"click"],[1,"fa-solid","fa-chevron-left","fa-2xl",2,"color","#ffffff"],[1,"col-md-6","titulo"],[1,"col-md-10"],[1,"col-md-2"],["class","btn btn-uni",3,"click",4,"ngIf"],[1,"col-md-4"],[1,"row","comentarios"],["class","comentario",4,"ngFor","ngForOf"],[1,"btn","btn-uni",3,"click"],[1,"comentario"],["src","https://banffventureforum.com/wp-content/uploads/2019/08/no-photo-icon-22.png","alt","User Avatar",1,"avatar"],[1,"comentario-contenido"],[1,"autor"],[1,"email"],[1,"body"],[1,"fecha"]],template:function(e,r){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),f("click",function(){return r.volverComunidades()}),u(4,"i",4),a(5," Atr\xE1s"),i()(),o(6,"div",5)(7,"div",6)(8,"strong"),a(9),i(),o(10,"p"),a(11),i()(),o(12,"div",7),p(13,Qt,2,0,"button",8)(14,Kt,2,0,"button",8),i()(),o(15,"div",9)(16,"p"),a(17),i(),o(18,"p"),a(19),i()()(),o(20,"div",10)(21,"strong"),a(22,"Comentarios: "),i(),p(23,Zt,11,4,"div",11),i()()),e&2&&(s(9),_(r.comunitieDetail.name),s(2),h("Descripci\xF3n: ",r.comunitieDetail.descripcion,""),s(2),c("ngIf",!r.isJoined),s(),c("ngIf",r.isJoined),s(3),h("Propietario: ",r.comunitieDetail.owner.name,""),s(2),h("Email: ",r.comunitieDetail.owner.email,""),s(4),c("ngForOf",r.comunitieDetail.post))},dependencies:[O,y,S],styles:[".container-fluid[_ngcontent-%COMP%]{padding:2rem}.encabezado[_ngcontent-%COMP%]{background:linear-gradient(270deg,#010635,#03129b);color:#fff;padding:1rem;border-radius:10px;margin-bottom:2rem}.encabezado[_ngcontent-%COMP%]   .atras[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff}.encabezado[_ngcontent-%COMP%]   .atras[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{opacity:.8}.encabezado[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;display:block}.encabezado[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0}.encabezado[_ngcontent-%COMP%]   .btn-outline-light[_ngcontent-%COMP%]{border:1px solid white}.encabezado[_ngcontent-%COMP%]   .btn-outline-light[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.comentarios[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:1rem;display:block}.comentarios[_ngcontent-%COMP%]   .comentario[_ngcontent-%COMP%]{display:flex;align-items:flex-start;margin-bottom:1rem;background-color:#f8f9fa;border-radius:10px;padding:1rem}.comentarios[_ngcontent-%COMP%]   .comentario[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;margin-right:1rem}.comentarios[_ngcontent-%COMP%]   .comentario[_ngcontent-%COMP%]   .comentario-contenido[_ngcontent-%COMP%]{flex-grow:1}.comentarios[_ngcontent-%COMP%]   .comentario[_ngcontent-%COMP%]   .comentario-contenido[_ngcontent-%COMP%]   .autor[_ngcontent-%COMP%]{font-weight:700;margin-bottom:.2rem}.comentarios[_ngcontent-%COMP%]   .comentario[_ngcontent-%COMP%]   .comentario-contenido[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{font-size:.9em;color:#6c757d;margin-bottom:.5rem}.comentarios[_ngcontent-%COMP%]   .comentario[_ngcontent-%COMP%]   .comentario-contenido[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{margin-bottom:.5rem}.comentarios[_ngcontent-%COMP%]   .comentario[_ngcontent-%COMP%]   .comentario-contenido[_ngcontent-%COMP%]   .fecha[_ngcontent-%COMP%]{font-size:.8em;color:#6c757d;margin-bottom:0}.btn[_ngcontent-%COMP%]{margin-bottom:10px;padding:8px 15px;border-radius:20px;font-weight:700;transition:all .3s ease}.btn.btn-uni[_ngcontent-%COMP%]{background:#fff;color:#0a125c;border:2px solid #0a125c}.btn.btn-uni[_ngcontent-%COMP%]:hover{color:#fff;background:#283180;border:2px solid #ffffff}"]})};var je=class n{constructor(t,e,r,l){this.route=t;this.router=e;this.comunityService=r;this.authService=l}communityId;community={id:0,name:"",descripcion:"",owner:{id:0,name:"",email:"",profileDesc:""},tags:[],post:[]};communityRequest={name:"",descripcion:""};baseRoute;ngOnInit(){this.route.params.subscribe(t=>{this.communityId=+t.id,this.setBaseRoute(),this.loadCommunity()})}setBaseRoute(){this.authService.getUser()?.role==="ROLE_ORGANIZER"?this.baseRoute="/organizer":this.baseRoute="/participant",console.log(`Base route set to: ${this.baseRoute}`)}loadCommunity(){this.comunityService.getCommunityById(this.communityId).subscribe(t=>{this.community=t,this.communityRequest.name=t.name,this.communityRequest.descripcion=t.descripcion},t=>{console.error("Error fetching community",t)})}updateCommunity(){this.communityRequest.name||(this.communityRequest.name=this.community.name),this.communityRequest.descripcion||(this.communityRequest.descripcion=this.community.descripcion),this.comunityService.updateCommunity(this.communityId,this.communityRequest).subscribe(t=>{console.log("Community updated",t),this.router.navigate([`${this.baseRoute}/comunidades/creados`])},t=>{console.error("Error updating community",t)})}deleteCommunity(){this.comunityService.deleteCommunity(this.communityId).subscribe(t=>{console.log("Community deleted",t),this.router.navigate([`${this.baseRoute}/comunidades/creados`])},t=>{console.error("Error deleting community",t)})}cancel(){console.log("Canceling"),console.log(this.baseRoute),this.router.navigate([`${this.baseRoute}/comunidades/creados`])}static \u0275fac=function(e){return new(e||n)(B(K),B(M),B(L),B(U))};static \u0275cmp=x({type:n,selectors:[["app-comunity-manage"]],standalone:!0,features:[P],decls:49,vars:4,consts:[[1,"strong"],[1,"row","d-flex","justify-content-center","m-5"],[1,"col-md-8"],[1,"form-group"],["for","nombreComunidad"],["type","text","id","nombreComunidad","name","name",1,"form-control",3,"ngModelChange","ngModel","placeholder"],["for","descripcionComunidad"],["id","descripcionComunidad","rows","3","name","description",1,"form-control",3,"ngModelChange","ngModel","placeholder"],[1,"row","d-flex","justify-content-evenly","m-5"],["type","button","data-bs-toggle","modal","data-bs-target","#updateModal",1,"btn","btn-primary","btn-lg","btnd"],[1,"btn","btn-outline-dark","btn-lg","btnd",3,"click"],[1,"row","m-5"],["type","button","data-bs-toggle","modal","data-bs-target","#deleteModal",1,"btn","btn-danger","btn-lg"],["id","updateModal","tabindex","-1","aria-labelledby","updateModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","updateModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],["id","deleteModal","tabindex","-1","aria-labelledby","deleteModalLabel","aria-hidden","true",1,"modal","fade"],["id","deleteModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"]],template:function(e,r){e&1&&(o(0,"h2",0),a(1,"Gestionar Comunidad"),i(),o(2,"div",1)(3,"div",2)(4,"form")(5,"div",3)(6,"label",4),a(7,"Nombre de la Comunidad"),i(),o(8,"input",5),Y("ngModelChange",function(g){return W(r.communityRequest.name,g)||(r.communityRequest.name=g),g}),i()(),o(9,"div",3)(10,"label",6),a(11,"Descripcion de la comunidad"),i(),o(12,"textarea",7),Y("ngModelChange",function(g){return W(r.communityRequest.descripcion,g)||(r.communityRequest.descripcion=g),g}),i()()(),o(13,"div",8)(14,"button",9),a(15," Actualizar "),i(),o(16,"button",10),f("click",function(){return r.cancel()}),a(17,"Cancelar"),i()(),o(18,"div",11)(19,"button",12),a(20," Eliminar Comunidad "),i()()()(),o(21,"div",13)(22,"div",14)(23,"div",15)(24,"div",16)(25,"h5",17),a(26,"Confirmar Actualizaci\xF3n"),i(),u(27,"button",18),i(),o(28,"div",19),a(29," \xBFEst\xE1s seguro de que deseas cambiar los datos? "),i(),o(30,"div",20)(31,"button",21),a(32,"Cancelar"),i(),o(33,"button",22),f("click",function(){return r.updateCommunity()}),a(34,"Actualizar"),i()()()()(),o(35,"div",23)(36,"div",14)(37,"div",15)(38,"div",16)(39,"h5",24),a(40,"Confirmar Eliminaci\xF3n"),i(),u(41,"button",18),i(),o(42,"div",19),a(43," \xBFEst\xE1s seguro de que deseas eliminar esta comunidad? "),i(),o(44,"div",20)(45,"button",21),a(46,"Cancelar"),i(),o(47,"button",25),f("click",function(){return r.deleteCommunity()}),a(48,"Eliminar"),i()()()()()),e&2&&(s(8),J("ngModel",r.communityRequest.name),c("placeholder",r.community.name),s(4),J("ngModel",r.communityRequest.descripcion),c("placeholder",r.community.descripcion))},dependencies:[O,ne,te,q,H,X,ee,be],styles:[".btnd[_ngcontent-%COMP%]{width:150px}"]})};export{we as a,Ee as b,N as c,Ie as d,Ue as e,Fe as f,Re as g,Te as h,ze as i,Ve as j,Be as k,Ae as l,$e as m,je as n};
