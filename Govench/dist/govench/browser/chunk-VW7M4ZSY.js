import{a as U}from"./chunk-TLLUELUD.js";import{a as I,b as D}from"./chunk-OS3JT4VR.js";import{a as G,b as F,c as s,d as y,e as x,g as M,j as w,l as P,m as H,n as j,o as z,p as V,q as O,r as k,s as R}from"./chunk-RWTGWTTF.js";import{j as C,k as S,p as E}from"./chunk-D6JMSZLO.js";import"./chunk-WXI33M2S.js";import{$ as p,Ib as h,Pa as a,cb as c,da as v,gb as l,kb as t,lb as e,mb as d,nc as b,pb as g,pc as _,zb as n}from"./chunk-IPLSOEAW.js";function Q(i,o){i&1&&(t(0,"span"),n(1," El correo es obligatorio. "),e())}function W(i,o){i&1&&(t(0,"span"),n(1," Introduzca un correo v\xE1lido. "),e())}function X(i,o){i&1&&(t(0,"span"),n(1," La contrase\xF1a es obligatoria. "),e())}function $(i,o){i&1&&(t(0,"span"),n(1," Su contrase\xF1a no puede ser menor a 8 caracteres. "),e())}var N=class i{loginform;fb=p(O);router=p(C);snackbar=p(I);authService=p(E);constructor(){this.loginform=this.fb.group({email:["",[s.required,s.email]],password:["",[s.required,s.minLength(8)]]})}controlHasError(o,m){return this.loginform.controls[o].hasError(m)}onSumbit(){if(this.loginform.invalid)return;let o=this.loginform.value;this.authService.login(o).subscribe({next:()=>{this.showSnackBar("Inicio de sesion exitoso"),this.authService.getUser()?.role==="ROLE_ORGANIZER"?this.router.navigateByUrl("/organizer/cuenta/profile"):this.router.navigateByUrl("/participant/cuenta/profile")},error:m=>{this.showSnackBar("Error en el inicio de sesion. Por favor, intenta de nuevo.")}})}navigateToRecovery(){this.router.navigate(["/password/recovery"])}showSnackBar(o){this.snackbar.open(o,"Close",{duration:2e3,verticalPosition:"top"})}static \u0275fac=function(m){return new(m||i)};static \u0275cmp=v({type:i,selectors:[["app-login"]],standalone:!0,features:[h],decls:36,vars:8,consts:[[1,"p-3"],[1,"container","mt-5","mb-5"],[1,"row","d-flex","justify-content-center","bg-1","text-light","subtitle","m-2","p-2"],[1,"caja","d-flex","align-items-center"],[1,"fa-solid","fa-angle-left","fs-3"],[1,"col-8","text-center"],["routerLink","/auth/register",1,"link-light","link-offset-2","link-underline-opacity-25","link-underline-opacity-100-hover"],[1,"caja"],[1,"container","col-md-4","mt-1","formulario",3,"ngSubmit","formGroup"],[1,"row"],["for","email"],["id","email","formControlName","email","type","email","placeholder","Ingrese su email",1,"input-c"],[1,"alert","alert-danger","mt-2",3,"hidden"],[4,"ngIf"],[1,"row","mt-2"],["for","password"],["id","password","formControlName","password","type","password","placeholder","Ingrese su contrase\xF1a",1,"input-c"],[1,"row","text-center","m-3"],[1,"btn-link",2,"cursor","pointer",3,"click"],["type","submit",1,"btn","rounded-pill","p-2",3,"disabled"]],template:function(m,r){if(m&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),d(4,"i",4),e(),t(5,"div",5)(6,"h1"),n(7,"Iniciar Sesi\xF3n"),e(),t(8,"p"),n(9,"\xBFNo tienes una cuenta? "),t(10,"a",6),n(11,"Crear"),e()()(),d(12,"div",7),e()(),t(13,"form",8),g("ngSubmit",function(){return r.onSumbit()}),t(14,"div",9)(15,"label",10),n(16,"Correo:"),e(),d(17,"input",11),t(18,"div",12),c(19,Q,2,0,"span",13)(20,W,2,0,"span",13),e()(),t(21,"div",14)(22,"label",15),n(23,"Contrase\xF1a:"),e(),d(24,"input",16),t(25,"div",12),c(26,X,2,0,"span",13)(27,$,2,0,"span",13),e()(),t(28,"div",17)(29,"p"),n(30,"\xBFOlvido su contrase\xF1a? "),t(31,"a",18),g("click",function(){return r.navigateToRecovery()}),n(32,"Recuperar contrase\xF1a"),e()()(),t(33,"div",9)(34,"button",19),n(35,"Iniciar Sesi\xF3n"),e()()()()),m&2){let u,T,q,f,A,B;a(13),l("formGroup",r.loginform),a(5),l("hidden",((u=r.loginform.get("email"))==null?null:u.valid)||((u=r.loginform.get("email"))==null?null:u.pristine)),a(),l("ngIf",(T=r.loginform.get("email"))==null||T.errors==null?null:T.errors.required),a(),l("ngIf",(q=r.loginform.get("email"))==null||q.errors==null?null:q.errors.email),a(5),l("hidden",((f=r.loginform.get("password"))==null?null:f.valid)||((f=r.loginform.get("password"))==null?null:f.pristine)),a(),l("ngIf",(A=r.loginform.get("password"))==null||A.errors==null?null:A.errors.required),a(),l("ngIf",(B=r.loginform.get("password"))==null||B.errors==null?null:B.errors.minlength),a(7),l("disabled",r.loginform.invalid)}},dependencies:[_,b,k,M,F,y,x,R,w,P,S,D],styles:['@charset "UTF-8";.inicio[_ngcontent-%COMP%]{min-height:60vh}.espaciado[_ngcontent-%COMP%]{height:70vh;display:flex;align-items:center;align-content:center;flex-direction:column}.bg-1[_ngcontent-%COMP%]{background:linear-gradient(90deg,#084aaa,#010635)}.input-c[_ngcontent-%COMP%]{width:100%;padding:8px;border:2px solid #084AAA;border-radius:50px;font-size:16px}.subtitle[_ngcontent-%COMP%]{border-radius:50px}.caja[_ngcontent-%COMP%]{width:10%}.caja[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.formulario[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:24px;color:#084aaa;padding:10px}.formulario[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:#084aaa;color:#fff;border:none;font-size:20px;transition:background-color .3s}.formulario[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#010635;color:#fff}.fa-solid[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s ease-in-out}.fa-solid[_ngcontent-%COMP%]:hover{transform:scale(2.2)}']})};function ee(i,o){i&1&&(t(0,"div",39),n(1,"El nombre es obligatorio."),e())}function te(i,o){i&1&&(t(0,"div",39),n(1,"Solo se permiten letras en el nombre."),e())}function re(i,o){i&1&&(t(0,"div",39),n(1,"El apellido es obligatorio."),e())}function ne(i,o){i&1&&(t(0,"div",39),n(1,"Solo se permiten letras en el apellido."),e())}function ie(i,o){i&1&&(t(0,"div",39),n(1,"El correo es obligatorio."),e())}function oe(i,o){i&1&&(t(0,"div",39),n(1,"Introduzca un correo v\xE1lido."),e())}function ae(i,o){i&1&&(t(0,"div",39),n(1,"La contrase\xF1a es obligatoria."),e())}function le(i,o){i&1&&(t(0,"div",39),n(1," La contrase\xF1a debe tener m\xEDnimo 6 caracteres. "),e())}function se(i,o){i&1&&(t(0,"div",39),n(1,"Las contrase\xF1as no coinciden."),e())}function me(i,o){i&1&&(t(0,"div",39),n(1,"La fecha de nacimiento es obligatoria."),e())}function de(i,o){i&1&&(t(0,"div",39),n(1,"La fecha no puede ser futura."),e())}function ce(i,o){i&1&&(t(0,"div",39),n(1," Debe ser al menos 10 a\xF1os atr\xE1s. "),e())}function pe(i,o){i&1&&(t(0,"div",39),n(1,"El g\xE9nero es obligatorio."),e())}var L=class i{registerForm;fb=p(O);router=p(C);snackbar=p(I);authService=p(E);constructor(){this.registerForm=this.fb.group({name:["",[s.required,s.minLength(3),s.maxLength(100)]],lastname:["",[s.required,s.minLength(3)]],birthday:["",[s.required,this.validateBirthDate]],gender:["",s.required],profileDesc:["",s.maxLength(250)],email:["",[s.required,s.email]],password:["",[s.required,s.minLength(6)]],confirmPassword:["",[s.required]],termsAccepted:[!1,s.requiredTrue]},{validators:this.passwordsMatchValidator})}validateBirthDate(o){let m=new Date(o.value),r=new Date,u=new Date(r.getFullYear()-10,r.getMonth(),r.getDate());return m>r?{invalidDate:!0}:m>u?{minDateError:!0}:null}passwordsMatchValidator(o){let m=o.get("password")?.value,r=o.get("confirmPassword")?.value;return m===r?null:{passwordMismatch:!0}}controlHasError(o,m){return this.registerForm.controls[o].hasError(m)}onSubmit(){if(this.registerForm.valid){let o={name:this.registerForm.value.name,lastname:this.registerForm.value.lastname,birthday:this.registerForm.value.birthday,gender:this.registerForm.value.gender,profileDesc:this.registerForm.value.profileDesc,email:this.registerForm.value.email,password:this.registerForm.value.password};console.log("Informacion del usuario: ",o),this.authService.register(o).subscribe({next:()=>{this.showSnackBar("Usuario creado correctamente"),this.router.navigate(["auth/login"])},error:()=>{this.showSnackBar("Ocurrio un error registrando la cuenta")}})}}showSnackBar(o){this.snackbar.open(o,"Cerrar",{duration:2e3,verticalPosition:"top"})}static \u0275fac=function(m){return new(m||i)};static \u0275cmp=v({type:i,selectors:[["app-register"]],standalone:!0,features:[h],decls:81,vars:15,consts:[[1,"p-3"],[1,"container","mt-5","mb-5"],[1,"row","d-flex","justify-content-center","bg-1","text-light","subtitle","m-2","p-2"],[1,"caja","d-flex","align-items-center"],["routerLink","/auth/login",1,"fa-solid","fa-angle-left","fs-3"],[1,"col-8","text-center"],["routerLink","/auth/login",1,"link-light","link-offset-2","link-underline-opacity-25","link-underline-opacity-100-hover"],[1,"caja"],[1,"container","col-md-8","mt-1","formulario",3,"ngSubmit","formGroup"],[1,"row"],[1,"col-md-6"],[1,"col-md-6","mb-3"],["for","name"],["id","name","formControlName","name","type","text","placeholder","Ingrese su nombre",1,"input-c","p-2"],["class","alert alert-danger",4,"ngIf"],["for","lastname"],["id","lastname","formControlName","lastname","type","text","placeholder","Ingrese su apellido",1,"input-c","p-2"],[1,"mb-3"],["for","email"],["id","email","formControlName","email","type","email","placeholder","Ingrese su correo electr\xF3nico",1,"input-c","p-2"],["for","password"],["id","password","formControlName","password","type","password","placeholder","Ingrese su contrase\xF1a",1,"input-c","p-2"],["for","confirmPassword"],["id","confirmPassword","formControlName","confirmPassword","type","password","placeholder","Ingrese su nuevamente su contrase\xF1a",1,"input-c","p-2"],["for","birthday"],["id","birthday","formControlName","birthday","type","date","placeholder","Selecciones su fecha de nacimiento",1,"input-c","p-2"],["for","gender"],["id","gender","formControlName","gender",1,"input-c","p-2"],["value",""],["value","M"],["value","F"],[1,"col-12","mb-3"],["for","profileDesc"],["id","profileDesc","formControlName","profileDesc","rows","3","maxlength","250","placeholder","Cuentanos algo sobre ti",1,"input-c","p-2"],[1,"col-12","mb-3","text-center"],["type","checkbox","formControlName","termsAccepted"],["href","#"],[1,"col-12","text-center"],["type","submit","id","regiterBtn",1,"btn","rounded-pill","p-2",3,"disabled"],[1,"alert","alert-danger"]],template:function(m,r){m&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),d(4,"i",4),e(),t(5,"div",5)(6,"h1"),n(7,"Crear Cuenta"),e(),t(8,"p"),n(9,"\xBFYa tienes una cuenta? "),t(10,"a",6),n(11,"Iniciar Sesi\xF3n"),e()()(),d(12,"div",7),e()(),t(13,"form",8),g("ngSubmit",function(){return r.onSubmit()}),t(14,"div",9)(15,"div",10)(16,"div",9)(17,"div",11)(18,"label",12),n(19,"Nombre"),e(),d(20,"input",13),c(21,ee,2,0,"div",14)(22,te,2,0,"div",14),e(),t(23,"div",11)(24,"label",15),n(25,"Apellido"),e(),d(26,"input",16),c(27,re,2,0,"div",14)(28,ne,2,0,"div",14),e()(),t(29,"div",17)(30,"label",18),n(31,"Correo"),e(),d(32,"input",19),c(33,ie,2,0,"div",14)(34,oe,2,0,"div",14),e(),t(35,"div",17)(36,"label",20),n(37,"Contrase\xF1a"),e(),d(38,"input",21),c(39,ae,2,0,"div",14)(40,le,2,0,"div",14),e(),t(41,"div",17)(42,"label",22),n(43,"Confirmar contrase\xF1a"),e(),d(44,"input",23),c(45,se,2,0,"div",14),e()(),t(46,"div",10)(47,"div",17)(48,"label",24),n(49,"Fecha de nacimiento"),e(),d(50,"input",25),c(51,me,2,0,"div",14)(52,de,2,0,"div",14)(53,ce,2,0,"div",14),e(),t(54,"div",17)(55,"label",26),n(56,"G\xE9nero"),e(),t(57,"select",27)(58,"option",28),n(59,"Seleccione su g\xE9nero"),e(),t(60,"option",29),n(61,"Masculino"),e(),t(62,"option",30),n(63,"Femenino"),e()(),c(64,pe,2,0,"div",14),e(),t(65,"div",31)(66,"label",32),n(67,"Descripci\xF3n de perfil"),e(),d(68,"textarea",33),e()()(),t(69,"div",34),d(70,"input",35),n(71," He le\xEDdo y acepto los "),t(72,"a",36),n(73,"t\xE9rminos y condiciones"),e(),n(74," y "),t(75,"a",36),n(76,"pol\xEDticas de privacidad"),e(),n(77,". "),e(),t(78,"div",37)(79,"button",38),n(80,"Registrarse"),e()()()()),m&2&&(a(13),l("formGroup",r.registerForm),a(8),l("ngIf",r.controlHasError("name","required")&&r.registerForm.controls.name.touched),a(),l("ngIf",r.controlHasError("name","pattern")&&r.registerForm.controls.name.touched),a(5),l("ngIf",r.controlHasError("lastname","required")&&r.registerForm.controls.lastname.touched),a(),l("ngIf",r.controlHasError("lastname","pattern")&&r.registerForm.controls.lastname.touched),a(5),l("ngIf",r.controlHasError("email","required")&&r.registerForm.controls.email.touched),a(),l("ngIf",r.controlHasError("email","email")&&r.registerForm.controls.email.touched),a(5),l("ngIf",r.controlHasError("password","required")&&r.registerForm.controls.password.touched),a(),l("ngIf",r.controlHasError("password","minlength")&&r.registerForm.controls.password.touched),a(5),l("ngIf",r.registerForm.errors==null?null:r.registerForm.errors.passwordMismatch),a(6),l("ngIf",r.controlHasError("birthday","required")&&r.registerForm.controls.birthday.touched),a(),l("ngIf",r.controlHasError("birthday","invalidDate")&&r.registerForm.controls.birthday.touched),a(),l("ngIf",r.controlHasError("birthday","minDateError")&&r.registerForm.controls.birthday.touched),a(11),l("ngIf",r.controlHasError("gender","required")&&r.registerForm.controls.gender.touched),a(15),l("disabled",r.registerForm.invalid))},dependencies:[_,b,k,M,j,z,F,G,H,y,x,V,R,w,P,S,D],styles:['@charset "UTF-8";.caja[_ngcontent-%COMP%]{padding:60px}.p-3[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding:20px}.bg-1[_ngcontent-%COMP%]{background:linear-gradient(90deg,#084aaa,#010635)}.input-c[_ngcontent-%COMP%]{width:100%;border:2px solid #084AAA;font-size:16px;box-sizing:border-box;resize:none;border-radius:93px}#profileDesc[_ngcontent-%COMP%]{border-radius:15px}.subtitle[_ngcontent-%COMP%]{border-radius:116px}.caja[_ngcontent-%COMP%]{width:10%}.caja[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.3rem}.formulario[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:17px}.formulario[_ngcontent-%COMP%]   #regiterBtn[_ngcontent-%COMP%]{background-color:#084aaa;color:#fff;font-size:1.2em;transition:background-color .3s;width:20%}.fa-solid[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s ease-in-out}.fa-solid[_ngcontent-%COMP%]:hover{transform:scale(2.2)}']})};var Le=[{path:"",component:U,children:[{path:"login",component:N},{path:"register",component:L}]}];export{Le as authRoutes};
